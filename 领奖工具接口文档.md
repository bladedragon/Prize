# 领奖工具接口文档



### 统一错误码

| 错误码 | 错误信息     |
| ------ | ------------ |
| -1     | 服务获取失败 |

示例：

```java
{
  "status": -1,
  "msg": "Password cannot be null"
}
```



### 一、登录接口



1. **功能说明**

   登录后台管理系统

2. **接口调用地址**

   > /login

3. **接口请求方式**

   > POST

4. **入参列表**

   | 字段类型 | 字段名   | 注释   | 默认 | 备注                      |
   | -------- | -------- | ------ | ---- | ------------------------- |
   | String   | username | 用户名 | null | 表中预设用户名为“redrock” |
   | String   | password | 密码   | null | 表中预设密码“123456”      |

5. **返回样例**



```json
 //成功样例
 {
  "status": 0,
  "data": "登录成功"
}
```

1. **返回字段说明**

   | 字段类型 | 字段名 | 注释     | 备注 |
   | -------- | ------ | -------- | ---- |
   | int      | status | 返回状态 |      |
   | String   | data   | 返回情况 |      |



### 二、创建特定类型活动

1. **功能说明**  

   创建特定类型活动,将用户数据存入数据库，并发送模板消息

2. **接口调用地址**

   > /specifiedAct

3. **接口请求方式**

   > POST

4. **入参列表**

```json
{
	"activity":"学霸帮帮忙",     //活动名称
    "actStatus":1,                //活动状态  0代表活动结束，1代表活动进行中
    "reqStudents":[ 				//学生信息List 
      {
      "stuname": "竹祯铮",
      "college": "scie",
      "stuid": "2017210246",
      "telephone": "123456",
       "reward":"iphone"
   		 },
        {
            "stuname":"柳晓诚",                 //学生姓名
            "college":"scie",               //学生专业
            "stuid":"2017210243",               //学号
            "telephone":"78564",   				//电话号码
            "reward":"usb3.0" 				//奖品详情
        }
    ]
}
```



5.**返回样例** 

```json
{
  "status":200,                         //返回状态
  "info": "success",     				//返回信息
    "failMsg": [   						//发送失败学生信息，没有则为空
   	  "college": "scie",
      "stuid": "2017210246",
      "telephone": "123456",
      "stuname": "竹祯铮"     
    ]   //发送失败则返回信息
}
```

### 三、创建非特定类型活动

1. **功能说明**  

   创建非特定类型活动

2. **接口调用地址**

   > /noSpecifiedAct

3. **接口请求方式**

   > POST

4. **入参列表** 

```json
{
	"activity":"学霸帮帮忙",     //活动名称，必填
    "actStatus":1,                //活动状态 ，必填 0代表活动结束，1代表活动进行中
}
```



5.**返回参数** 

```json
{
	"status":200,  
    "info":"success"
}
```







### 四、特定类型扫码领奖接口 

1. **功能说明**  

   扫码用户授权获取信息后，修改数据库内领奖情况

2. **接口调用地址**

   > /getPrizeA/{activity}

   > activity:活动名称     type：1-指定   2 -非指定

3. **接口请求方式**

   > GET

4. **返回列表**

   + 返回字段说明

   | 字段类型 | 字段名 | 注释     | 备注        |
   | :------- | ------ | -------- | ----------- |
   | String   | status | 状态，   | 正常返回200 |
   | String   | info   | 返回信息 |             |

   + 返回样例

   ```json
   {
   	"status":200,  
       "info":"success"
   }
   ```




### 五、非特定类型扫码领奖接口

1. **功能说明**  

   扫码用户授权获取信息后，判断数据库是否已有记录，如果没有则插入用户，并返回

2. **接口调用地址**

   > /getPrizeB/{activity}

3. **接口请求方式**

   > GET

4. **返回列表** 

   - 返回字段说明

   | 字段类型 | 字段名 | 注释     | 备注        |
   | :------- | ------ | -------- | ----------- |
   | String   | status | 状态     | 正常返回200 |
   | String   | info   | 返回信息 |             |

   - 返回样例

   ```json
   {
   	"status":200,  
       "info":"success"
   }
   ```




### 六、展示获奖用户界面接口

1. **功能说明**  

   通过后台查询数据库匹配活动的用户分页显示

2. **接口调用地址**

   > /showPrizer

3. **接口请求方式**

   > POST

4. **入参列表** 

   | 字段类型 | 字段名   | 注释                            | 默认 |
   | -------- | -------- | ------------------------------- | ---- |
   | String   | activity | 获取活动名称                    | null |
   | int      | page     | 获取页数                        | 0    |
   | int      | type     | 获取活动类型(0-指定   1-非指定) | 0    |

   5.**返回列表**  

   - 返回字段说明

   | 字段类型 | 字段名    | 注释     | 备注                    |
   | :------- | --------- | -------- | ----------------------- |
   | String   | status    | 状态     | 正常返回200             |
   | String   | info      | 返回信息 | 成功success             |
   | int      | total     | 总页数   |                         |
   | String   | stuname   | 姓名     |                         |
   | String   | stuid     | 学号     |                         |
   | String   | telephone | 联系方式 |                         |
   | String   | college   | 专业     |                         |
   | String   | activity  | 参与活动 |                         |
   | String   | reward    | 获奖详情 |                         |
   | String   | add_time  | 添加时间 | 格式yyyy-MM-dd HH:mm:ss |
   | int      | status    | 状态     | 0-未领取  1-已领取      |

   - 返回样例

   ```json
   {
   	"status":200,                         //返回状态
     "info": "success",     				//返回信息
       "total":20,
       "data": [  
           {					
      	  "stuname": "zzz",
         "stuid": "2017210246",			
         "telephone": "123456",
         "college": "scie",			//专业
           "activity":"重邮约跑",			//参与活动
           "add_time":"2018-12-7",		//添加时间
           "reward":"iphone",		//获奖详情
           "status":1   			//0-未领取  1-已领取
           }
       ]   //发送失败则返回信息
   }
   ```



### 七、展示活动界面接口

1. **功能说明**  

   分页显示活动界面

2. **接口调用地址**

   > /showActivity

3. **接口请求方式**

   > POST

4. **入参列表** 

| 字段类型 | 字段名 | 注释     | 默认 |
| -------- | ------ | -------- | ---- |
| int      | page   | 获取页数 | 0    |

5.**返回列表**  

- 返回字段说明

| 字段类型 | 字段名    | 注释     | 备注                    |
| :------- | --------- | -------- | ----------------------- |
| String   | status    | 状态     | 正常返回200             |
| String   | info      | 返回信息 | 成功success             |
| int      | total     | 总页数   |                         |
| String   | stuid     | 学号     |                         |
| String   | telephone | 联系方式 |                         |
| String   | college   | 专业     |                         |
| String   | reward    | 获奖详情 |                         |
| String   | activity  | 参与活动 |                         |
| String   | add_time  | 添加时间 | 格式yyyy-MM-dd HH:mm:ss |
| int      | status    | 状态     | 0-未领取  1-已领取      |

- 返回样例

```json
{
	"status":200,                         //返回状态
  "info": "success",     				//返回信息
    "data": [   						//
   	  "stuname": "zzz",
      "stuid": "2017210246",			
      "telephone": "123456",
      "college": "scie",			//专业
        "activity":"重邮约跑",			//参与活动
        "add_time":"2018-12-7",		//添加时间
        "reward":"iphone",		//获奖详情
        "status":1                //0-未领取  1-已领取
    ]   //发送失败则返回信息
}
```



### 八、删除活动接口

1. **功能说明**  

   删除活动

2. **接口调用地址**

   > /deleteActivity

3. **接口请求方式**

   > POST

4. **入参列表** 

| 字段类型 | 字段名   | 注释     | 默认 |
| -------- | -------- | -------- | ---- |
| String   | activity | 活动名称 |      |

5.**返回列表**  

- 返回字段说明

| 字段类型 | 字段名 | 注释                  |
| -------- | ------ | --------------------- |
| String   | status | 返回状态，正常返回200 |
| String   | info   | 返回信息              |
|          |        |                       |

1. - 返回样例

   ```json
   {
   	"status":200,  
       "info":"success"
   }
   ```

### 